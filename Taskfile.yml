# https://taskfile.dev

version: "3"

vars:
  TYPE: build

tasks:
  build:go:
    cmd: goreleaser {{if eq .TYPE "publish"}}release{{else}}build{{end}} --clean {{if eq .TYPE "build"}}--snapshot{{end}}
    generates:
      - ./dist/**/*
      - exclude: ./dist/**/npm/**

  build:npm:
    cmds:
      - npx @sprisa/npmreleaser@latest build {{if eq .TYPE "publish"}}--publish{{end}}
